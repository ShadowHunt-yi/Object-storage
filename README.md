# æ™ºåŸŸäº‘å›¾-å¯¹è±¡å­˜å‚¨å¹³å°

[![Vue](https://img.shields.io/badge/Vue-2.6.11-4FC08D?style=flat&logo=vue.js)](https://vuejs.org/)
[![Vite](https://img.shields.io/badge/Vite-7.1.2-646CFF?style=flat&logo=vite)](https://vitejs.dev/)
[![Electron](https://img.shields.io/badge/Electron-37.2.6-47848F?style=flat&logo=electron)](https://electronjs.org/)
[![Element UI](https://img.shields.io/badge/Element%20UI-2.15.13-409EFF?style=flat)](https://element.eleme.io/)

ä¸€ä¸ªåŸºäº **Vue 2** + **Vite** + **Electron** æ„å»ºçš„ç°ä»£åŒ–å¯¹è±¡å­˜å‚¨ç®¡ç†å¹³å°ï¼Œæ”¯æŒ Web å’Œæ¡Œé¢åŒæ¨¡å¼è¿è¡Œã€‚

## âœ¨ ç‰¹æ€§

### ğŸŒ åŒæ¨¡å¼æ”¯æŒ
- **Web æ¨¡å¼**: æ ‡å‡†çš„æµè§ˆå™¨åº”ç”¨ï¼Œæ”¯æŒåœ¨çº¿è®¿é—®
- **Desktop æ¨¡å¼**: è·¨å¹³å°æ¡Œé¢åº”ç”¨ (Windows/macOS/Linux)

### ğŸš€ ç°ä»£åŒ–æŠ€æœ¯æ ˆ
- **å‰ç«¯æ¡†æ¶**: Vue 2.7.16 + Vuex + Vue Router
- **æ„å»ºå·¥å…·**: Vite 7.1.2 (æé€Ÿæ„å»ºå’Œçƒ­æ›´æ–°)
- **æ¡Œé¢æ¡†æ¶**: Electron 37.2.6 (åŸç”Ÿæ¡Œé¢ä½“éªŒ)
- **UI ç»„ä»¶**: Element UI 2.15.13 (ä¼ä¸šçº§ç»„ä»¶åº“)

### ğŸ”§ æ ¸å¿ƒåŠŸèƒ½
- **å¯¹è±¡å­˜å‚¨ç®¡ç†**: æ¡¶ç®¡ç†ã€æ–‡ä»¶ä¸Šä¼ /ä¸‹è½½ã€é¢„è§ˆ
- **ç”¨æˆ·æƒé™ç³»ç»Ÿ**: è§’è‰²ç®¡ç†ã€æƒé™æ§åˆ¶
- **æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ **: å¤§æ–‡ä»¶æ–­ç‚¹ç»­ä¼ 
- **æ‰‹åŠ¿è¯†åˆ«æ§åˆ¶**: åŸºäº MediaPipe çš„æ‰‹åŠ¿æ“ä½œ
- **æ•°æ®å¯è§†åŒ–**: åŸºäº ECharts çš„ç»Ÿè®¡å›¾è¡¨
- **æ™ºèƒ½ä»£ç†**: è‡ªåŠ¨ç¯å¢ƒæ£€æµ‹å’Œ API ä»£ç†

## ğŸ“ é¡¹ç›®ç»“æ„

```
Object-storage/
â”œâ”€â”€ ğŸ“ public/                 # é™æ€èµ„æº
â”‚   â”œâ”€â”€ favicon.ico           # åº”ç”¨å›¾æ ‡
â”‚   â””â”€â”€ mediapipe/            # AI æ¨¡å‹æ–‡ä»¶
â”œâ”€â”€ ğŸ“ src/                   # Vue åº”ç”¨æºç 
â”‚   â”œâ”€â”€ ğŸ“ api/               # API æ¥å£å®šä¹‰
â”‚   â”œâ”€â”€ ğŸ“ assets/            # é™æ€èµ„æº (å›¾ç‰‡ã€å­—ä½“ã€æ ·å¼)
â”‚   â”œâ”€â”€ ğŸ“ components/        # Vue ç»„ä»¶
â”‚   â”œâ”€â”€ ğŸ“ lib/               # å·¥å…·åº“
â”‚   â”œâ”€â”€ ğŸ“ plugins/           # æ’ä»¶é…ç½®
â”‚   â”œâ”€â”€ ğŸ“ router/            # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ ğŸ“ store/             # Vuex çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ ğŸ“ utils/             # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ ğŸ“ view/              # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ ğŸ“ workers/           # Web Workers
â”‚   â””â”€â”€ main.js               # åº”ç”¨å…¥å£
â”œâ”€â”€ ğŸ“ electron/              # Electron ç›¸å…³æ–‡ä»¶
â”‚   â”œâ”€â”€ main.js               # ä¸»è¿›ç¨‹å…¥å£
â”‚   â”œâ”€â”€ preload.js            # é¢„åŠ è½½è„šæœ¬
â”‚   â””â”€â”€ proxy-server.js       # å†…ç½®ä»£ç†æœåŠ¡å™¨
â”œâ”€â”€ ğŸ“ docs/                  # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ ELECTRON_WORKFLOW_GUIDE.md  # å·¥ä½œæµç¨‹æŒ‡å—
â”‚   â””â”€â”€ MIGRATION_GUIDE.md          # è¿ç§»æŒ‡å—
â”œâ”€â”€ package.json              # é¡¹ç›®é…ç½®å’Œä¾èµ–
â”œâ”€â”€ vite.config.js            # Vite æ„å»ºé…ç½®
â”œâ”€â”€ babel.config.cjs          # Babel é…ç½®
â””â”€â”€ README.md                 # é¡¹ç›®è¯´æ˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Node.js**: >= 16.0.0
- **pnpm**: >= 7.0.0 (æ¨è) æˆ– npm >= 8.0.0

### å®‰è£…ä¾èµ–

```bash
# ä½¿ç”¨ pnpm (æ¨è)
pnpm install

# æˆ–ä½¿ç”¨ npm
npm install
```

### å¯åŠ¨åç«¯æœåŠ¡

ç¡®ä¿åç«¯ API æœåŠ¡è¿è¡Œåœ¨ `http://127.0.0.1:8888`

### å¼€å‘æ¨¡å¼

#### Web æ¨¡å¼å¼€å‘
```bash
# å¯åŠ¨ Web å¼€å‘æœåŠ¡å™¨ (ç«¯å£ 5173)
pnpm dev

# æˆ–
npm run dev
```

#### Electron æ¨¡å¼å¼€å‘
```bash
# å¯åŠ¨ Electron æ¡Œé¢åº”ç”¨å¼€å‘
pnpm electron:dev

# æˆ–
npm run electron:dev
```

### ç”Ÿäº§æ„å»º

#### Web æ¨¡å¼æ„å»º
```bash
# æ„å»º Web åº”ç”¨
pnpm build

# æ„å»ºå¹¶ç”Ÿæˆåˆ†ææŠ¥å‘Š
pnpm build:analyze
```

#### Electron æ¨¡å¼æ„å»º
```bash
# æ„å»ºå¹¶æ‰“åŒ… Electron åº”ç”¨
pnpm electron:build

# æ„å»ºä½†ä¸æ‰“åŒ… (ä»…ç¼–è¯‘)
pnpm electron:preview
```

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶é…ç½®ç¯å¢ƒå˜é‡ï¼š

```bash
# API æœåŠ¡åœ°å€
VITE_APP_BASE_API=http://127.0.0.1:8888

# åº”ç”¨æ ‡é¢˜
VITE_APP_TITLE=æ™ºåŸŸäº‘å›¾å¯¹è±¡å­˜å‚¨å¹³å°
```

### ä»£ç†é…ç½®

é¡¹ç›®æ”¯æŒä¸¤ç§ä»£ç†æ¨¡å¼ï¼š

#### Web æ¨¡å¼ (Vite ä»£ç†)
```javascript
// vite.config.js
server: {
  proxy: {
    '/api': {
      target: 'http://127.0.0.1:8888',
      changeOrigin: true,
      rewrite: (path) => path.replace(/^\/api/, '')
    }
  }
}
```

#### Electron æ¨¡å¼ (å†…ç½®ä»£ç†)
```javascript
// è‡ªåŠ¨å¯åŠ¨å†…ç½®ä»£ç†æœåŠ¡å™¨ (ç«¯å£ 5174)
// è¯·æ±‚æµç¨‹: Vue App â†’ localhost:5174/api â†’ 127.0.0.1:8888
```

## ğŸ“– è¯¦ç»†æ–‡æ¡£

- ğŸ“š [å®Œæ•´å·¥ä½œæµç¨‹æŒ‡å—](./ELECTRON_WORKFLOW_GUIDE.md) - è¯¦ç»†äº†è§£é¡¹ç›®æ¶æ„å’Œå·¥ä½œæµç¨‹
- ğŸ”„ [Vue CLI è¿ç§»æŒ‡å—](./MIGRATION_GUIDE.md) - ä» Vue CLI è¿ç§»åˆ° Vite + 

## ğŸŒŸ æ ¸å¿ƒç‰¹æ€§è¯¦è§£

### æ™ºèƒ½ç¯å¢ƒæ£€æµ‹

é¡¹ç›®è‡ªåŠ¨æ£€æµ‹è¿è¡Œç¯å¢ƒå¹¶é€‚é…ç›¸åº”çš„é…ç½®ï¼š

```javascript
// å¤šé‡æ£€æµ‹æœºåˆ¶
function isElectron() {
  return !!(
    window.electronAPI?.isElectron ||           // Preload æ³¨å…¥æ£€æµ‹
    window.process?.versions?.electron ||       // Process ä¿¡æ¯æ£€æµ‹
    navigator.userAgent.includes('Electron')    // User Agent æ£€æµ‹
  )
}
```

### å®‰å…¨æ¶æ„

- **ä¸Šä¸‹æ–‡éš”ç¦»**: å¯ç”¨ `contextIsolation` ç¡®ä¿æ¸²æŸ“è¿›ç¨‹å®‰å…¨
- **é¢„åŠ è½½è„šæœ¬**: é€šè¿‡ `contextBridge` å®‰å…¨æš´éœ²ä¸»è¿›ç¨‹ API
- **ç¦ç”¨ Node.js é›†æˆ**: æ¸²æŸ“è¿›ç¨‹ä¸­ç¦ç”¨ `nodeIntegration`
- **CORS å¤„ç†**: å†…ç½®ä»£ç†æœåŠ¡å™¨è‡ªåŠ¨å¤„ç†è·¨åŸŸè¯·æ±‚

### æ„å»ºä¼˜åŒ–

#### ä»£ç åˆ†å‰²ç­–ç•¥
```javascript
manualChunks: {
  'vue-vendor': ['vue', 'vue-router', 'vuex'],    // Vue æ ¸å¿ƒåº“
  'element-ui': ['element-ui'],                    // UI ç»„ä»¶åº“
  'echarts': ['echarts'],                          // å›¾è¡¨åº“
  'mediapipe': ['@mediapipe/*'],                   // AI åº“
  'utils': ['axios', 'dayjs', 'nprogress']        // å·¥å…·åº“
}
```

#### èµ„æºä¼˜åŒ–
- **å›¾ç‰‡å‹ç¼©**: è‡ªåŠ¨å‹ç¼© PNG/JPG/GIF/SVG
- **å­—ä½“ä¼˜åŒ–**: æŒ‰éœ€åŠ è½½ Web å­—ä½“
- **Bundle åˆ†æ**: å¯è§†åŒ–åŒ…å¤§å°åˆ†æ

## ğŸ› ï¸ å¼€å‘å·¥å…·

### è°ƒè¯•æŒ‡å—

#### ä¸»è¿›ç¨‹è°ƒè¯•
```bash
# å¯ç”¨ä¸»è¿›ç¨‹è°ƒè¯•
electron --inspect=5858 dist/main.js
```

#### æ¸²æŸ“è¿›ç¨‹è°ƒè¯•
- åœ¨ Electron åº”ç”¨ä¸­æŒ‰ `F12` æ‰“å¼€å¼€å‘è€…å·¥å…·
- æˆ–ä½¿ç”¨èœå•: è§†å›¾ â†’ å¼€å‘è€…å·¥å…·

#### ä»£ç†æœåŠ¡å™¨è°ƒè¯•
```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:5174/health

# æŸ¥çœ‹ä»£ç†çŠ¶æ€
# æ§åˆ¶å°è¾“å‡ºè¯·æ±‚æ—¥å¿—
```

### æ€§èƒ½ç›‘æ§

#### æ„å»ºæ€§èƒ½
- **å†·å¯åŠ¨**: Vite ~5-10s vs Webpack ~30-45s
- **çƒ­æ›´æ–°**: Vite <1s vs Webpack 2-5s
- **ç”Ÿäº§æ„å»º**: Vite ~30-45s vs Webpack ~60-90s

#### è¿è¡Œæ—¶ç›‘æ§
- å¯åŠ¨æ—¶é—´ä¼˜åŒ–
- å†…å­˜å ç”¨ç›‘æ§
- CPU ä½¿ç”¨ç‡è·Ÿè¸ª

## ğŸ› å¸¸è§é—®é¢˜

### ç¯å¢ƒæ£€æµ‹å¤±è´¥
**é—®é¢˜**: `isElectron()` è¿”å› `false`  
**è§£å†³**: æ£€æŸ¥ preload è„šæœ¬æ˜¯å¦æ­£ç¡®åŠ è½½ï¼ŒéªŒè¯ contextBridge é…ç½®

### API è¯·æ±‚è·¨åŸŸ
**é—®é¢˜**: CORS é”™è¯¯  
**è§£å†³**: ç¡®è®¤ä»£ç†æœåŠ¡å™¨è¿è¡ŒçŠ¶æ€ï¼Œæ£€æŸ¥åç«¯ CORS é…ç½®

### æ„å»ºå¤±è´¥
**é—®é¢˜**: Vite æ„å»ºé”™è¯¯  
**è§£å†³**: æ¸…ç†ä¾èµ–é‡è£…ï¼Œæ£€æŸ¥é…ç½®æ–‡ä»¶è¯­æ³•

### èµ„æºæ–‡ä»¶ 404
**é—®é¢˜**: ç”Ÿäº§æ¨¡å¼ä¸‹èµ„æºåŠ è½½å¤±è´¥  
**è§£å†³**: ç¡®è®¤ `base: './'` é…ç½®ï¼Œæ£€æŸ¥ç›¸å¯¹è·¯å¾„

## ğŸ“¦ éƒ¨ç½²æŒ‡å—

### Web æ¨¡å¼éƒ¨ç½²

```bash
# æ„å»º
pnpm build

# éƒ¨ç½²åˆ° Web æœåŠ¡å™¨
# éœ€è¦é…ç½®åç«¯ CORS ç­–ç•¥
```

### æ¡Œé¢åº”ç”¨åˆ†å‘

```bash
# æ„å»ºå¹¶æ‰“åŒ…
pnpm electron:build

# è¾“å‡ºæ–‡ä»¶åœ¨ release/ ç›®å½•
â”œâ”€â”€ æ™ºåŸŸäº‘å›¾-å¯¹è±¡å­˜å‚¨å¹³å°-0.1.0.exe        # Windows å®‰è£…åŒ…
â”œâ”€â”€ æ™ºåŸŸäº‘å›¾-å¯¹è±¡å­˜å‚¨å¹³å°-0.1.0-portable.exe # Windows ä¾¿æºç‰ˆ
â”œâ”€â”€ æ™ºåŸŸäº‘å›¾-å¯¹è±¡å­˜å‚¨å¹³å°-0.1.0.dmg        # macOS å®‰è£…åŒ…
â””â”€â”€ æ™ºåŸŸäº‘å›¾-å¯¹è±¡å­˜å‚¨å¹³å°-0.1.0.AppImage    # Linux åº”ç”¨åŒ…
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ™ è‡´è°¢

- [Vue.js](https://vuejs.org/) - æ¸è¿›å¼ JavaScript æ¡†æ¶
- [Vite](https://vitejs.dev/) - ä¸‹ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·
- [Electron](https://electronjs.org/) - è·¨å¹³å°æ¡Œé¢åº”ç”¨æ¡†æ¶
- [Element UI](https://element.eleme.io/) - ä¼ä¸šçº§ UI ç»„ä»¶åº“

---

**å¼€å‘å›¢é˜Ÿ**: æ™ºåŸŸäº‘å›¾  
**ç‰ˆæœ¬**: 0.1.0  
**æœ€åæ›´æ–°**: 2024å¹´12æœˆ